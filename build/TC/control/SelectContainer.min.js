TC.control=TC.control||{},TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control.js"),TC.control.SelectContainer=function(){var t=this;TC.Control.apply(t,arguments);var e=t._classSelector="."+t.CLASS;t._selectors={TAB:e+"-tab",RADIOBUTTON:"input[type=radio][name=sctnr-sel]",ELEMENT:e+"-elm"},t.controlOptions=t.options.controls||[];var n=t.controlOptions.length;t._ctlDeferreds=new Array(n);for(var o=0;n>o;o++)t._ctlDeferreds[o]=$.Deferred()},TC.inherit(TC.control.SelectContainer,TC.Control),function(){var t=TC.control.SelectContainer.prototype;t.CLASS="tc-ctl-sctnr",t.template=TC.isDebug?TC.apiLocation+"TC/templates/SelectContainer.html":function(){function e(t,e){return t.w("<h2>").f(e.get(["title"],!1),e,"h").w('</h2><div class="tc-ctl-sctnr-select"><form>').s(e.get(["controls"],!1),e,{block:n},{}).w("</form></div>").s(e.get(["controls"],!1),e,{block:o},{})}function n(t,e){return t.w('<label class="tc-ctl-sctnr-tab tc-ctl-sctnr-tab-').f(e.get(["$idx"],!1),e,"h").w('" style="width:calc(100%/').f(e.get(["$len"],!1),e,"h").w(' - 1px)"><input type="radio" name="sctnr-sel" value="').f(e.get(["$idx"],!1),e,"h").w('" /><span>').f(e.get(["title"],!1),e,"h").w("</span></label>")}function o(t,e){return t.w('<div class="tc-ctl-sctnr-elm tc-ctl-sctnr-elm-').f(e.get(["$idx"],!1),e,"h").w(' tc-hidden"></div>')}return dust.register(t.CLASS,e),e.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,e},t.register=function(t){var e=this;TC.Control.prototype.register.call(e,t),e.renderPromise().then(function(){e.title=e.getLocaleString(e.options.title||"moreControls"),e._$div.find("h2").first().html(e.title);var n=" "+e.getLocaleString("beta");$('<span class="tc-beta">'+n+"</span>").appendTo(e._$div.find("h2"));for(var o=new Array(e.controlOptions.length),r=0,l=e.controlOptions.length;l>r;r++){var s=e.controlOptions[r];o[r]=t.addControl(s.name,$.extend({div:e._$div.find("."+e.CLASS+"-elm-"+r)},s.options))}var i=function(t,n){t.renderPromise().then(function(){var o=e.getLocaleString(e.controlOptions[n].title)||t._$div.find("h2").first().html();t._$div.parents(e._classSelector).first().find(e._selectors.TAB+"-"+n+" span").html(o)})};$.when.apply(e,o).then(function(){for(var t=0,n=arguments.length;n>t;t++){var o=arguments[t];i(o,t),e._ctlDeferreds[t].resolve(o)}})})},t.render=function(t){var e=this;e.renderData({title:e.title,controls:e.controlOptions},function(){var t=function(t){var n=$(this).closest(e._selectors.TAB).find(e._selectors.RADIOBUTTON),o=n.val(),r=e._$div.find(e._selectors.ELEMENT);e._oldValue===o&&e.options.deselectable?(setTimeout(function(){n.prop("checked",!1)},0),e._oldValue=null,$active=$(),$hidden=r):($active=r.filter(e._selectors.ELEMENT+"-"+o),$hidden=r.not($active),e._oldValue=o),$active.removeClass(TC.Consts.classes.HIDDEN),$hidden.addClass(TC.Consts.classes.HIDDEN),n.prop("checked",!0)};e._$div.find("span").on(TC.Consts.event.CLICK,t);for(var n=0,o=e._ctlDeferreds.length;o>n;n++)e.getControl(n).then(function(t){t.render()});"number"==typeof e.options.defaultSelection&&t.call(e._$div.find(e._selectors.RADIOBUTTON).get(e.options.defaultSelection))})},t.getControl=function(t){var e=this._ctlDeferreds[t];return e||(e=$.Deferred(),e.reject()),e.promise()}}();