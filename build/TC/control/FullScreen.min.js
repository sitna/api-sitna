TC.control=TC.control||{},TC.Control||TC.syncLoadJS(TC.apiLocation+"TC/Control.js"),TC.control.FullScreen=function(){var e=this;TC.Control.apply(e,arguments),e.fullScreenElement=document.documentElement},TC.inherit(TC.control.FullScreen,TC.Control),function(){var e=TC.control.FullScreen.prototype;e.CLASS="tc-ctl-fscreen",e.template=TC.isDebug?TC.apiLocation+"TC/templates/FullScreen.html":function(){function n(e,n){return e.w('<button class="tc-ctl-fscreen-btn" title="').h("i18n",n,{},{$key:"fscreen.tip"}).w('"></button>')}return dust.register(e.CLASS,n),n.__dustBody=!0,n},e.register=function(e){var n=this;TC.Control.prototype.register.call(n,e),n.renderPromise().then(function(){var e=n._$div.find("."+n.CLASS+"-btn");n.enabledFullScreen()?(e.on("click",function(){n.toggleFullScreen()}),$(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",function(){e.toggleClass(TC.Consts.classes.ACTIVE,n.isFullScreen()),e.attr("title",n.getLocaleString(n.isFullScreen()?"fscreen.tip.return":"fscreen.tip"))})):e.addClass(TC.Consts.classes.HIDDEN)})},e.requestFullScreen=function(){var e=this,n=e.fullScreenElement;document.documentElement.requestFullScreen?n.requestFullScreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):n.msRequestFullscreen&&n.msRequestFullscreen()},e.cancelFullScreen=function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},e.isFullScreen=function(){return document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement},e.toggleFullScreen=function(){var e=this;e.isFullScreen()?e.cancelFullScreen():e.requestFullScreen()},e.enabledFullScreen=function(){var e=this,n=e.fullScreenElement,l=document.documentElement.requestFullScreen||n.mozRequestFullScreen||n.webkitRequestFullScreen||n.msRequestFullscreen;return l&&"function"==typeof l}}();