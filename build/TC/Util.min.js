var TC=TC||{};!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.Util=t()}(TC,function(){Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var e=Number.prototype.toLocaleString;Number.prototype.toLocaleString=function(t,r){if("eu-ES"!=t||TC.Util.detectIE())return e.apply(this,arguments);var n=e.apply(this,arguments);return n=n.replace(/\,/g,"."),Math.floor(this)==this&&Number.isInteger(Math.floor(this))||(n=n.replace(/.([^.]*)$/,",$1")),n};var t={},r={},o=["Capability","Request","GetMap","DCPType","0","HTTP","Get","OnlineResource"],a=["OperationsMetadata","GetTile","DCP","HTTP","Get","0","href"],s=function(e,t,r){return r<t.length-1?e.hasOwnProperty(t[r])?s(e[t[r]],t,++r):null:e[t[r]]},l={getMapLocale:function(e){return e.options&&e.options.locale&&e.options.locale.replace("_","-")||"es-ES"},regex:{PROTOCOL:/(^https?:)/i},isOnCapabilities:function(e){var t=2==arguments.length?arguments[1]:!0,r=t?e:e.replace(TC.Util.regex.PROTOCOL,"");if(t){if(TC.capabilities[r])return e}else for(var n in TC.capabilities)if(n.replace(TC.Util.regex.PROTOCOL,"")==r)return n;for(n in TC.capabilities){var i=s(TC.capabilities[n],o,0)||s(TC.capabilities[n],a,0);if(i&&t&&e==i)return i;if(i&&e.replace(TC.Util.regex.PROTOCOL,"")==i.replace(TC.Util.regex.PROTOCOL,""))return i}return e},reqGetMapOnCapabilities:function(e){var t=2==arguments.length?arguments[1]:!0,r=(t?e:e.replace(TC.Util.regex.PROTOCOL,""),function(e){var r=s(e,o,0)||s(e,a,0);return r?t?r.split("?")[0]:r.split("?")[0].replace(TC.Util.regex.PROTOCOL,""):null});return TC.capabilities[e]?r(TC.capabilities[e]):null},getFNFromString:function(e){var t=window,r=e.split(".");for(i=0;i<r.length-1;i++)if(t=t[r[i]],void 0==t)return;return t[r[r.length-1]]},isURL:function(e){return/^(http|https|ftp|mailto)\:\/\//i.test(e)},isSecureURL:function(e){return/^(f|ht)tps?:\/\//i.test(e)?/^(f|ht)tps:\/\//i.test(e):!0},isSameOrigin:function(e){var t=0!==e.indexOf("http")&&0!==e.indexOf("//"),r=!t&&e.match(TC.Consts.url.SPLIT_REGEX);if(r){var n=window.location,o=r[1];t=(o==n.protocol||void 0==o)&&r[3]==n.hostname;var a=r[4],i=n.port;(80!=a&&""!==a||"80"!=i&&""!==i)&&(t=t&&a==i)}return t},formatNumber:function(e,t){var r=typeof e;return"number"===r?e.toLocaleString(t):"string"===r&&(n=parseFloat(e),n===new Number(e).valueOf())?n.toLocaleString(t):e},addProtocol:function(e){var t=e;return e&&0===e.indexOf("//")&&(t=location.protocol+e),t},getDiv:function(e){var t;return t="string"==typeof e?document.getElementById(e):1==$(e).length?e:document.createElement("div")},getScriptLocation:function(){var e,t;if(document.currentScript)t=document.currentScript;else{var r=document.getElementsByTagName("script");t=r[r.length-1]}return e=t.getAttribute("src"),e?e.substr(0,e.lastIndexOf("/")+1):""},getBackgroundUrlFromCss:function(e){var r="";if(void 0!==t[e])r=t[e];else{var n=$('<div style="display:none">').addClass(e).appendTo("body"),o=/^url\(['"]?(.*?)['"]?\)$/gi.exec(n.css("background-image"));o&&o.length>1&&(r=o[o.length-1]),n.remove(),t[e]=r}return r},getPointIconUrl:function u(e){var t=null;if(e.url)t=e.url;else{var n;if("string"==typeof e.cssClass)n=e.cssClass;else{var o=e.classes||TC.Cfg.styles.marker.classes;if(n=o[0],e.group){if(void 0===r[e.group]){var a=0;for(var i in r)a++;a%=o.length,r[e.group]=o[a]}n=r[e.group]}}t=TC.Util.getBackgroundUrlFromCss(n)}return t||e===TC.Cfg.styles.point||""===e.cssClass||(t=u(TC.Cfg.styles.point)),t},addArrayToTree:function c(e,t,r){var n=null,o=!1;r=r||0;var a=e[r];if(a){for(var i,s=0,l=t.children.length;l>s;s++)if(i=t.children[s],i.name===a){o=!0;var u=c(e,i,r+1);u&&(n=u);break}o||(i={name:a,title:a,uid:"/"+e.slice(0,r+1).join("/"),children:[]},t.children.push(i),n=i)}return n},parseCoords:function(e){var t=null,r=function(e){var t=e,r={};r.type=TC.Consts.GEOGRAPHIC;var n=t.indexOf("°");if(r.value=parseFloat(t.substr(0,n)),t=t.substr(n+1),n=t.indexOf("'"),n>=0){var o=parseFloat(t.substr(0,n))/60;r.value>=0?r.value+=o:r.value-=o,t=t.substr(n+1),n=t.indexOf("'"),n>=0&&(o=parseFloat(t.substr(0,n).replace(",","."))/3600,r.value>=0?r.value+=o:r.value-=o)}return r},n=function(e){var t=$.trim(e);if(t.match(/^1?\d{0,2}\s*\u00B0(\s*\d{1,2}\s*'(\s*\d{1,2}([.,]\d+)?\s*'')?)?\s*[NnSsWwOoEe]$/g)){switch(t[t.length-1]){case"S":case"s":case"W":case"w":case"O":case"o":t="-"+t}return t=t.substr(0,t.length-1),r(t)}if(t.match(/^[+-]?1?\d{0,2}\s*\u00B0(\s*\d{1,2}\s*'(\s*\d{1,2}([.,]\d+)?\s*'')?)?$/g))return r(t);if(t.match(/^1?\d{0,2}([.,]\d+)?\s*\u00B0?\s*[NnSsWwOoEe]$/g)){var n={type:TC.Consts.GEOGRAPHIC,value:parseFloat(t.substr(0,t.length-1).replace(",","."))};return t.match(/[SsWwOo]$/)&&(n.value=-n.value),n}return t.match(/^[+-]?1?\d{0,2}([.,]\d+)?\s*\u00B0?$/g)?{type:TC.Consts.GEOGRAPHIC,value:parseFloat(t.replace(",","."))}:t.match(/^\d{6,7}([.,]\d+)?$/g)?{type:TC.Consts.UTM,value:parseFloat(t.replace(",","."))}:null};e=$.trim(e).toUpperCase();var o=e.split(",");if(4===o.length?o=[o.slice(0,1).join("."),o.slice(2,3).join(".")]:(1===o.length||3===o.length)&&(o=e.split(" ")),2===o.length){var a=n(o[0]),i=n(o[1]);null!==a&&null!==i&&(t=[a,i])}return t},reproject:function(e,t,r){var n,o=!0;$.isArray(e)&&$.isArray(e[0])||(o=!1,e=[e]),TC.loadProjDef(t,!0),TC.loadProjDef(r,!0);var a=new Proj4js.Proj(t),i=new Proj4js.Proj(r);n=new Array(e.length);for(var s=0,l=e.length;l>s;s++){var u=Proj4js.transform(a,i,{x:e[s][0],y:e[s][1]});n[s]=[u.x,u.y]}return o||(n=n[0]),n},getMetersPerDegree:function(e){var t=void 0,r=6370997;if($.isArray(e)&&e.length>=4){var n=this.degToRad(e[3]-e[1]),o=Math.sin(n/2),a=o*o,i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));t=r*i/(e[3]-e[1])}return t},radToDeg:function(e){return 180*e/Math.PI},degToRad:function(e){return e*Math.PI/180},mod:function(e){return(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI)},getLocaleString:function(e,t,r){var n=t;if(TC.i18n&&TC.i18n[e]){var o=TC.i18n[e][t];if(o&&(n=o,r))for(var a in r)n=n.replace("{"+a+"}",r[a])}return n},getSimpleMimeType:function(e){var t="";if(e){var r=e.indexOf(";");r>0&&(e=e.substring(0,r)),t=e}return t},getQueryStringParams:function(e){var t;if(e){var r=e.indexOf("?");if(r>=0){t=e.substr(r);var n=t.indexOf("#");n>=0&&(t=t.substr(0,n))}else t="?"}else t=location.search;var o=$.map(t.replace(/(^\?)/,"").split("&"),function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0];return delete o[""],o},fastUnshift:function(e,t){for(var r=e.length;r;)e[r]=e[r-1],r--;e[0]=t},storage:{getCookie:function(e){return $.cookie(e)},setCookie:function(e,t,r){return $.cookie(e,t,r)},getLocalValue:function(e){var t=null;return t=localStorage&&localStorage instanceof Storage?localStorage.getItem(e):TC.Util.storage.getCookie(e)},setLocalValue:function(e,t){if(localStorage&&localStorage instanceof Storage)void 0===t?localStorage.removeItem(e):localStorage.setItem(e,t);else if(void 0===t){var r=new Date;r.setDate(r.getDate()-1),TC.Util.storage.setCookie(e,"",{expires:r})}else TC.Util.storage.setCookie(e,t);return e},getSessionLocalValue:function(e){var t=null;return t=sessionStorage&&sessionStorage instanceof Storage?sessionStorage.getItem(e):TC.Util.storage.getCookie(e)},setSessionLocalValue:function(e,t){if(sessionStorage&&sessionStorage instanceof Storage)void 0===t?sessionStorage.removeItem(e):sessionStorage.setItem(e,t);else if(void 0===t){var r=new Date;r.setDate(r.getDate()-1),TC.Util.storage.setCookie(e,"",{expires:r})}else TC.Util.storage.setCookie(e,t);return e}},detectFirefox:function(){return/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?new Number(RegExp.$1):!1},detectIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var r=e.indexOf("Trident/");if(r>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var o=e.indexOf("Edge/");return o>0?parseInt(e.substring(o+5,e.indexOf(".",o)),10):!1},detectChrome:function(){return window.chrome},detectSafari:function(){return!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)},detectMouse:function(){if(Modernizr.mq("(pointer:coarse)")&&Modernizr.mq("(pointer:fine)"))return!0;if(Modernizr.mq("(pointer:coarse)")&&!Modernizr.mq("(pointer:fine)")){var e=function(){var e,t="(hover: hover)",r=!Modernizr.touch;return"matchMedia"in window?(e=window.matchMedia(t),e.media===t&&(r=e.matches)):console.log("no dispone de matchMedia"),r};return e()?!0:!1}return!Modernizr.mq("(pointer:coarse)")&&Modernizr.mq("(pointer:fine)")?!0:Modernizr.mq("(pointer:none)")?!1:Modernizr.touch?void 0:!0},detectAndroid:function(){return navigator.userAgent.match(/Android/i)},detectBlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},detectIOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},detectMobileWindows:function(){return navigator.userAgent.match(/IEMobile/i)},detectMobile:function(){return TC.Util.detectAndroid()||TC.Util.detectIOS()||TC.Util.detectMobileWindows()||TC.Util.detectBlackBerry()},getElementByNodeName:function(e,t){for(var r=t.indexOf(":"),n=t.substr(r+1),o=e.getElementsByTagNameNS("*",n),a=0;a<o.length;a++)if(o[a].nodeName==t)return o;return void 0},addURLParameters:function(e,t){if(!t)return e;var r=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),n=e.split("?");if(n.length>=2){var o=n[1].split(/[&;]/g);return o.push(r),e=n[0]+"?"+o.join("&")}return n=e.split("#"),n.length>=2?(n.shift(),e=n[0]+"?"+r+"#"+n.join("#")):e=e+"?"+r},removeURLParameter:function(e,t){var r=e.split("?");if(r.length>=2){for(var n=encodeURIComponent(t.toLowerCase())+"=",o=r[1].toLowerCase().split(/[&;]/g),a=o.length;a-->0;)-1!==o[a].lastIndexOf(n,0)&&o.splice(a,1);return e=r[0]+"?"+o.join("&")}return e},showModal:function(e,t){var r=$(e),t=t||{};r.off("click").removeAttr("hidden"),r.fadeIn(250,function(){r.on("click",".tc-modal-close",function(e){return e.stopPropagation(),TC.Util.closeModal(t.closeCallback)}),$.isFunction(t.openCallback)&&t.openCallback()})},closeModal:function(e){$(".tc-modal").hide().find(".tc-modal-window").removeAttr("style").off(),e&&e()},closeAlert:function(e){$(e).parents(".tc-alert").hide()},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)","i"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},getLocaleUserChoice:function(e){var t="en_US";e=e||{};var r=e.cookieName||"SITNA.language",n=e.paramName||"lang",o=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage,a=TC.Util.getParameterByName(n)||TC.Util.storage.getCookie(r)||o,i=a.indexOf("-");i>=0&&(a=a.substr(0,i));var s=new Date((new Date).getTime()+31536e6);switch(TC.Util.storage.setCookie(r,a,{expires:s}),a){case"eu":t="eu_ES";break;case"es":t="es_ES";break;default:t="en_US"}return t},downloadBlob:function(e,t){var r=document.createElement("a");if(void 0!==r.download){var n=URL.createObjectURL(t);r.setAttribute("href",n),r.setAttribute("download",e),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},downloadFile:function(e,t,r){var n=new Blob([r],{type:t});navigator.msSaveBlob?navigator.msSaveBlob(n,e):TC.Util.downloadBlob(e,n)},downloadDataURI:function(e,t,r){for(var n=atob(r.split(",")[1]),o=[],a=0;a<n.length;a++)o.push(n.charCodeAt(a));var i=new Blob([new Uint8Array(o)],{type:t});navigator.msSaveBlob?navigator.msSaveBlob(i,e):TC.Util.downloadBlob(e,i)},shortenUrl:function(e){var t;return $.ajax({url:"https://api-ssl.bitly.com/v3/shorten",data:{access_token:"6c466047309f44bd8173d83e81491648b243ee3d",longUrl:e},async:!1}).done(function(e){t=e.data.url}),t},utf8ToBase64:function(e){return window.btoa(unescape(encodeURIComponent(e)))},base64ToUtf8:function(e){var t;try{t=decodeURIComponent(escape(window.atob(e)))}catch(r){t=null}return t},operation:function(e,t,r,n){for(var o=[],a=0;a<e.length;a++){for(var i=e[a],s=!1,l=0;l<t.length;l++)if(r(i,t[l])){s=!0;break}s===n&&o.push(i)}return o},isSecureURL:function(e){return/^(f|ht)tps?:\/\//i.test(e)?/^(f|ht)tps:\/\//i.test(e):!0},inBoth:function(e,t,r){return this.operation(e,t,r,!0)},inFirstOnly:function(e,t,r){return this.operation(e,t,r,!1)},inSecondOnly:function(e,t,r){return this.inFirstOnly(t,e,r)},toDataUrl:function(e,t){var r={type:"image/png",encoderOptions:.92},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=n.type,a=n.encoderOptions,i=e.getContext("2d");if(!i)return"";var s=e.width,l=e.height,u=i.getImageData(0,0,s,l),c=i.globalCompositeOperation;t&&(i.globalCompositeOperation="destination-over",i.fillStyle=t,i.fillRect(0,0,s,l));var f=e.toDataURL(o,a);return t&&(i.clearRect(0,0,s,l),i.putImageData(u,0,0),i.globalCompositeOperation=c),f},imgToDataUrl:function(e,t){var r=function(e){var t=document.createElement("CANVAS"),r=t.getContext("2d");return t.height=e.height,t.width=e.width,r.drawImage(e,0,0),t},n=$.Deferred(),o=new Image;o.crossOrigin="anonymous",o.onload=function(){var e,a=r(o);e=TC.Util.toDataUrl(a,"#ffffff",{type:t||"image/jpeg",encoderOptions:1}),n.resolve(e,a)},o.onerror=function(a){var i=new XMLHttpRequest;i.open("GET",TC.proxify(e),!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.responseType="arraybuffer",i.onload=function(e){if(200===this.status){for(var a=new Uint8Array(this.response),s=a.length,l=new Array(s);s--;)l[s]=String.fromCharCode(a[s]);var u=l.join(""),c=i.getResponseHeader("content-type");0===c.indexOf("image")&&(o.src="data:"+c+";base64,"+window.btoa(u),o.onload=function(){var e=r(o);dataURL=TC.Util.toDataUrl(e,"#ffffff",{type:t||"image/jpeg",encoderOptions:1}),n.resolve(dataURL,e)})}},i.onreadystatechange=function(){4===i.readyState&&200!==i.status&&n.reject()},i.send()};var a=e.replace(/^https?\:/i,"");return o.src=a,(o.complete||void 0===o.complete)&&(o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o.src=a),n.promise()},addToCanvas:function(e,t,r){var n=TC.Util.cloneCanvas(e),o=$.Deferred(),a=n.getContext("2d"),i=new Image;return t.crossOrigin="anonymous",i.src=t,i.onload=function(){a.drawImage(i,r.x||0,r.y||0),o.resolve(n)},o.promise()},cloneCanvas:function(e){var t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),t},calculateAspectRatioFit:function(e,t,r,n){var o=Math.min(r/e,n/t);return{width:e*o,height:t*o}},getFormattedDate:function(e,t){function r(e){return 10>e?"0"+e:e}var n=new Date(e);return[n.getFullYear(),r(n.getMonth()+1),r(n.getDate())].concat(t?["_",r(n.getHours()),r(n.getMinutes()),r(n.getSeconds())]:[]).join("")},replaceAccent:function(e){var t={"ä":"a","ö":"o","ü":"u","Ä":"A","Ö":"O","Ü":"U","á":"a","é":"e",i:"i","ó":"o","ú":"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U","ñ":"n","Ñ":"N"};return e.replace(/[öä\u00fcÖÄ\u00dc\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da\u00f1\u00d1]/g,function(e){return t[e]})},downloadFileForm:function(e,t){var r=function(e,t){var r=$("<form/>",{"class":"tc-ctl-download-form",method:"post",enctype:"text/plain",action:TC.Util.detectIE()?TC.proxify(e):e}),n=$("<input/>",{"class":"tc-ctl-download-query",name:t.substring(0,t.indexOf("="))});r.append(n);var o=$("iframe").filter(function(t,r){return $(r).data("url-download")===e});o.length>0?o=o.first():(o=$('<iframe style="visibility: hidden; display:none;"></iframe>'),o.data("url-download",e),$("body").append(o));var a=o[0].contentDocument;return a.open(),a.write(r[0].outerHTML),a.close(),$("input",a).val(t.substring(t.indexOf("=")+1)),r=$("form",a)},n=[];if(jQuery.isArray(e))for(var o=e,a=0;a<o.length;a++)n.push(r(o[a].url,o[a].data));else n.push(r(e,t));$(n).submit(),setTimeout(function(){$(".tc-ctl-download-form").remove()},1e3)},WFSQueryBuilder:function(e,t,r,n,o){$.isArray(e)||(e=[e]);var a='xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd" xmlns:ogc="http://www.opengis.net/ogc" service="WFS" {resultType} {format} ';switch(r.version){case"1.0.0":case"1.1.0":a+='xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" ';break;case"2.0.0":a+='xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" '}for(var i in r)"string"==typeof r[i]&&i.indexOf("gml")<0&&r[i].indexOf("wfs")<0&&(a+=i+'="'+r[i]+'" ');var s="<wfs:GetFeature "+a.format({resultType:o?'resultType="hits"':"",format:'outputFormat="'+n+'"'})+">",l="",u="<wfs:Query typeName"+("2.0.0"===r.version?"s":"")+'="{typeName}">{filter}</wfs:Query>';return $.each(e,function(e,n){l+=u.format({typeName:n,filter:TC.Util.WFSFilterBuilder(t,r.version)})}),s+=l+"</wfs:GetFeature>"},WFSFilterBuilder:function(e,t){var r="";if(jQuery.isPlainObject(e))r='<{prefix}:Filter><{prefix}:Intersects><fes:ValueReference></fes:ValueReference><{prefix}:Function name="querySingle"><{prefix}:Literal>{clipLayer}</{prefix}:Literal><{prefix}:Literal>{geometryName}</{prefix}:Literal><{prefix}:Literal>{where}</{prefix}:Literal></{prefix}:Function></{prefix}:Intersects></{prefix}:Filter>'.format({prefix:"2.0.0"===t?"fes":"ogc",clipLayer:e.clipLayer,geometryName:e.geometryName,where:e.where});else switch(!0){case!e:break;case $.isArray(e):var n="<gml:Envelope><gml:lowerCorner>{lowerCorner}</gml:lowerCorner><gml:upperCorner>{upperCorner}</gml:upperCorner></gml:Envelope>".format({lowerCorner:e[0]+" "+e[1],upperCorner:e[2]+" "+e[3]});switch(!0){case"1.0.0"===t:case"1.1.0"===t:r+="<ogc:Filter><ogc:BBOX>"+n+"</ogc:BBOX></ogc:Filter>";break;case"2.0.0"===t:r+="<fes:Filter><fes:BBOX>"+n+"</fes:BBOX></fes:Filter>"}break;case e instanceof TC.Feature:switch(!0){case"1.0.0"===t:case"1.1.0"===t:r+="<ogc:Filter><ogc:Intersects><ogc:PropertyName></ogc:PropertyName>"+TC.Util.writeGMLGeometry(e,"2.0")+"</ogc:Intersects></ogc:Filter>";break;case"2.0.0"===t:r+="<fes:Filter><fes:Intersects><fes:ValueReference></fes:ValueReference>"+TC.Util.writeGMLGeometry(e,"3.2")+"</fes:Intersects></fes:Filter>"}break;default:TC.error("Geometría no válida")}return r},writeGMLGeometry:function(e,t){var r=function(e){var r;if(0===t.indexOf("3"))for(r=e.toString();r.indexOf(",")>=0;)r=r.replace(","," ");else r=e,jQuery.each(r,function(e,t){return t.join(",")}).join(" ");return r};switch(t){case"3.1.1":break;case"3.2":switch(!0){case TC.feature.Polyline&&e instanceof TC.feature.Polyline:return'<gml:LineString srsDimension="2"><gml:posList>'+r(e.geometry)+"</gml:posList></gml:LineString>";default:return'<gml:Polygon srsDimension="2"><gml:exterior><gml:LinearRing><gml:posList>'+r(e.geometry[0])+"</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>"}break;case"2.0":default:switch(!0){case TC.feature.Polyline&&e instanceof TC.feature.Polyline:return"<gml:LineString><gml:coordinates>"+r(e.geometry[0])+"</gml:coordinates></gml:LineString>";default:return"<gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>"+r(e.geometry[0])+"</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon>"}}}};return String.prototype.format=function(){var e=this.toString();if(!arguments.length)return e;var t=typeof arguments[0],t="string"==t||"number"==t?arguments:arguments[0];for(arg in t)e=e.replace(RegExp("\\{"+arg+"\\}","gi"),t[arg]);return e},l});