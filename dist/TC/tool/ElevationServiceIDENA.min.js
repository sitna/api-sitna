TC.tool=TC.tool||{};TC.tool.ElevationService||TC.syncLoadJS(TC.apiLocation+"TC/tool/ElevationService");TC.tool.ElevationServiceIDENA=function(o){TC.tool.ElevationService.apply(this,arguments);this.url=this.options.url||"//idena.navarra.es/ogc/wps";this.process=this.options.process||"gs:ExtractRasterPoints";this.coverageClass=this.options.coverageClass||"MDT_maxima_actualidad,Alturas_maxima_actualidad",this.minimumElevation=this.options.minimumElevation||-9998};TC.inherit(TC.tool.ElevationServiceIDENA,TC.tool.ElevationService);!function(){const o=TC.tool.ElevationServiceIDENA.prototype;o.request=function(o){const t={coordinates:(o=o||{}).coordinates,type:TC.Consts.geom.POLYLINE};if(1===o.coordinates.length){t.coordinates=o.coordinates[0];t.type=TC.Consts.geom.POINT}let e=o.coverageClass||this.coverageClass;const s=e.indexOf(",");e&&s>=0&&!o.includeHeights&&(e=e.substr(0,s));const i={coverageClass:e,geometry:{mimeType:TC.Consts.mimeType.JSON,value:TC.wrap.Geometry.toGeoJSON(t)}};if(o.crs){var n=o.crs.lastIndexOf(":");n<0&&(n=o.crs.lastIndexOf("#"));i.srid=o.crs.substr(n+1)}return TC.tool.ElevationService.prototype.request.call(this,{dataInputs:i},o)};o.parseResponse=function(o,t){const e=this,s=t.coverageClass||e.coverageClass,i=t.includeHeights&&s?s.split(",").length:1;if(i<=1)return TC.tool.ElevationService.prototype.parseResponse.call(e,o,t);if(o.coordinates){const t=o.coordinates,s=t.length/i,r=t.slice(0,s);var n;for(n=0;n<s;n++){const o=r[n];o[2]<e.minimumElevation&&(o[2]=null)}for(n=1;n<i;n++){const o=n*s;for(var a=0;a<s;a++){const s=t[a+o][2];r[a].push(s<e.minimumElevation?null:s)}}return r}return[]}}();